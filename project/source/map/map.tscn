[gd_scene load_steps=6 format=3 uid="uid://dv4gxfv4kty63"]

[ext_resource type="PackedScene" uid="uid://ckujg6i1b6ujw" path="res://source/utility/enemy_spawner.tscn" id="1_il36e"]
[ext_resource type="Texture2D" uid="uid://8r1s6ng6iids" path="res://resource/image/light.png" id="4_umj47"]

[sub_resource type="GDScript" id="GDScript_l1exk"]
script/source = "
extends Node2D

@onready var enemy = preload(\"res://source/enemy/enemy.tscn\")

@onready var rooms = $Rooms
@onready var enemy_spawner = $EnemySpawner

func _ready():
	
	# 创建SpawnInfo资源
	var spawn_info = SpawnInfo.new()
	spawn_info.time_start = 0
	spawn_info.time_end = 1000
	spawn_info.enemy = enemy
	spawn_info.enemy_num = 70
	spawn_info.enemy_spawn_delay = 1
	enemy_spawner.spawns.append(spawn_info)
	
func _process(delta):
	pass
	
func _physics_process(delta):
	pass
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_bf0sd"]
size = Vector2(256, 256)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_eu15v"]
polygon = PackedVector2Array(-128, -128, 128, -128, 128, 129, -128, 128)

[node name="Map" type="Node2D"]
script = SubResource("GDScript_l1exk")

[node name="Rooms" type="Node2D" parent="."]

[node name="EnemySpawner" parent="." instance=ExtResource("1_il36e")]

[node name="Polygon2D" type="Polygon2D" parent="."]
z_index = -10
color = Color(0.25098, 0.207843, 0.27451, 1)
polygon = PackedVector2Array(-9980, -6919, -10001, 6747, 10089, 6595, 10075, -6902)

[node name="Area2D" type="StaticBody2D" parent="."]
collision_layer = 15
collision_mask = 15

[node name="Polygon2D" type="Polygon2D" parent="Area2D"]
z_index = 3
polygon = PackedVector2Array(-331, 1989, -2600, 2000, -3600, 0, -2600, -2000, -447, -1999, -532, -6010, -9000, -6000, -9000, 6000, -246, 6009)

[node name="Polygon2D2" type="Polygon2D" parent="Area2D"]
z_index = 3
position = Vector2(9499, -76)
polygon = PackedVector2Array(-499, -5924, -8997, -5924, -8896, -1933, -6901, -1924, -5899, 76, -6899, 2076, -9000, 2075, -8986, 6072, -499, 6076)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Area2D"]
position = Vector2(288, -96)
polygon = PackedVector2Array(2312, 2096, 212.536, 2096, 201, 4249, -603, 4249, -629.098, 2096, -2888, 2096, -3888, 96, -2888, -1904, -730, -1906, -783, -5317, -313, -5370, -324, -5883, -9288, -5904, -9288, 6096, 8712, 6096, 8712, -5904, -227, -5883, -281, -5391, 242, -5242, 311, -1905, 2312, -1904, 3312, 96)

[node name="Light" type="Node2D" parent="."]

[node name="PointLight2D" type="PointLight2D" parent="Light"]
position = Vector2(-2000, -1600)
scale = Vector2(1.6, 1.6)
shadow_enabled = true
shadow_filter = 1
texture = ExtResource("4_umj47")
texture_scale = 8.0

[node name="PointLight2D2" type="PointLight2D" parent="Light"]
position = Vector2(2000, -1600)
scale = Vector2(1.6, 1.6)
shadow_enabled = true
shadow_filter = 1
texture = ExtResource("4_umj47")
texture_scale = 8.0

[node name="PointLight2D3" type="PointLight2D" parent="Light"]
position = Vector2(2000, 1600)
scale = Vector2(1.6, 1.6)
shadow_enabled = true
shadow_filter = 1
texture = ExtResource("4_umj47")
texture_scale = 8.0

[node name="PointLight2D4" type="PointLight2D" parent="Light"]
position = Vector2(-2000, 1600)
scale = Vector2(1.6, 1.6)
shadow_enabled = true
shadow_filter = 1
texture = ExtResource("4_umj47")
texture_scale = 8.0

[node name="Wall" type="Node2D" parent="."]
z_index = 3

[node name="StaticBody2D" type="StaticBody2D" parent="Wall"]
position = Vector2(-1600, 1000)
collision_layer = 15
collision_mask = 15

[node name="ColorRect" type="ColorRect" parent="Wall/StaticBody2D"]
offset_left = -128.0
offset_top = -128.0
offset_right = 128.0
offset_bottom = 128.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Wall/StaticBody2D"]
shape = SubResource("RectangleShape2D_bf0sd")

[node name="LightOccluder2D" type="LightOccluder2D" parent="Wall/StaticBody2D"]
occluder = SubResource("OccluderPolygon2D_eu15v")

[node name="StaticBody2D2" type="StaticBody2D" parent="Wall"]
position = Vector2(-1600, -1000)
collision_layer = 15
collision_mask = 15

[node name="ColorRect" type="ColorRect" parent="Wall/StaticBody2D2"]
offset_left = -128.0
offset_top = -128.0
offset_right = 128.0
offset_bottom = 128.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Wall/StaticBody2D2"]
shape = SubResource("RectangleShape2D_bf0sd")

[node name="LightOccluder2D" type="LightOccluder2D" parent="Wall/StaticBody2D2"]
occluder = SubResource("OccluderPolygon2D_eu15v")

[node name="StaticBody2D3" type="StaticBody2D" parent="Wall"]
position = Vector2(1600, -1000)
collision_layer = 15
collision_mask = 15

[node name="ColorRect" type="ColorRect" parent="Wall/StaticBody2D3"]
offset_left = -128.0
offset_top = -128.0
offset_right = 128.0
offset_bottom = 128.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Wall/StaticBody2D3"]
shape = SubResource("RectangleShape2D_bf0sd")

[node name="LightOccluder2D" type="LightOccluder2D" parent="Wall/StaticBody2D3"]
occluder = SubResource("OccluderPolygon2D_eu15v")

[node name="StaticBody2D4" type="StaticBody2D" parent="Wall"]
position = Vector2(1600, 1000)
collision_layer = 15
collision_mask = 15

[node name="ColorRect" type="ColorRect" parent="Wall/StaticBody2D4"]
offset_left = -128.0
offset_top = -128.0
offset_right = 128.0
offset_bottom = 128.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Wall/StaticBody2D4"]
shape = SubResource("RectangleShape2D_bf0sd")

[node name="LightOccluder2D" type="LightOccluder2D" parent="Wall/StaticBody2D4"]
occluder = SubResource("OccluderPolygon2D_eu15v")
