[gd_scene load_steps=13 format=3 uid="uid://dhari1nll3jlj"]

[ext_resource type="Texture2D" uid="uid://btq8xgnfm2o0v" path="res://resource/rune/rune_0.png" id="1_kts70"]
[ext_resource type="Texture2D" uid="uid://bylqgxss8sx2p" path="res://resource/image/rune_white.png" id="2_ovv2l"]
[ext_resource type="AudioStream" uid="uid://dgkteol57rrba" path="res://resource/sound/prize_draw.wav" id="3_riqte"]
[ext_resource type="Theme" uid="uid://cwvilb81l6i31" path="res://resource/theme/moyu.tres" id="4_pc5qx"]

[sub_resource type="GDScript" id="GDScript_f83fe"]
script/source = "
extends CanvasLayer

@onready var animation = $AnimationPlayer

@onready var rune_slot_1 = $HBoxContainer/TextureRect1
@onready var rune_slot_2 = $HBoxContainer/TextureRect2
@onready var rune_slot_3 = $HBoxContainer/TextureRect3

var path = 'res://resource/rune/'

var rune_dict = [
	preload(\"res://resource/rune/rune_0.png\"),
	preload(\"res://resource/rune/rune_1.png\"),
	preload(\"res://resource/rune/rune_2.png\"),
	preload(\"res://resource/rune/rune_3.png\"),
	preload(\"res://resource/rune/rune_4.png\"),
	preload(\"res://resource/rune/rune_5.png\"),
	preload(\"res://resource/rune/rune_6.png\"),
	preload(\"res://resource/rune/rune_7.png\"),
	preload(\"res://resource/rune/rune_8.png\"),
	preload(\"res://resource/rune/rune_9.png\"),
]

func _ready():
	MusicPlayer.hide()
	MusicPlayer.player.stream_paused = true
	
	var num_1 = randi_range(0,len(rune_dict)-1)
	var num_2 = randi_range(0,len(rune_dict)-1)
	var num_3 = randi_range(0,len(rune_dict)-1)
	
	rune_slot_1.texture = rune_dict[num_1]
	rune_slot_2.texture = rune_dict[num_2]
	rune_slot_3.texture = rune_dict[num_3]
	
	Global.player_dict['rune_'+str(num_1)] += 1
	Global.player_dict['rune_'+str(num_2)] += 1
	Global.player_dict['rune_'+str(num_3)] += 1
	
	animation.play(\"animation\")
	await animation.animation_finished
	
	$Button.visible = true

func _on_button_pressed():
	MusicPlayer.show()
	MusicPlayer.player.stream_paused = false
	get_tree().paused = false
	queue_free()
"

[sub_resource type="Animation" id="Animation_5l445"]
resource_name = "animation"
length = 9.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("HBoxContainer/TextureRect1/RuneWhite:modulate")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(1.5, 3),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("HBoxContainer/TextureRect2/RuneWhite:modulate")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(4.5, 6),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("HBoxContainer/TextureRect3/RuneWhite:modulate")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(7.5, 9),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_bncv8"]
_data = {
"animation": SubResource("Animation_5l445")
}

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_ee1nb"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_xsj0f"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_8mmx7"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_5xe4t"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_og7nn"]

[node name="PrizeDraw" type="CanvasLayer"]
process_mode = 2
script = SubResource("GDScript_f83fe")

[node name="ColorRect" type="ColorRect" parent="."]
offset_left = -1834.0
offset_top = -868.0
offset_right = 5617.0
offset_bottom = 3311.0
color = Color(0, 0, 0, 0.501961)

[node name="HBoxContainer" type="HBoxContainer" parent="."]
offset_left = 778.0
offset_top = 747.0
offset_right = 3178.0
offset_bottom = 1347.0
theme_override_constants/separation = 300

[node name="TextureRect1" type="TextureRect" parent="HBoxContainer"]
texture_filter = 1
custom_minimum_size = Vector2(600, 600)
layout_mode = 2
texture = ExtResource("1_kts70")
expand_mode = 1

[node name="RuneWhite" type="Sprite2D" parent="HBoxContainer/TextureRect1"]
modulate = Color(1, 1, 1, 0)
position = Vector2(300, 300)
scale = Vector2(37.5, 37.5)
texture = ExtResource("2_ovv2l")

[node name="TextureRect2" type="TextureRect" parent="HBoxContainer"]
texture_filter = 1
custom_minimum_size = Vector2(600, 600)
layout_mode = 2
texture = ExtResource("1_kts70")
expand_mode = 1

[node name="RuneWhite" type="Sprite2D" parent="HBoxContainer/TextureRect2"]
modulate = Color(1, 1, 1, 0)
position = Vector2(300, 300)
scale = Vector2(37.5, 37.5)
texture = ExtResource("2_ovv2l")

[node name="TextureRect3" type="TextureRect" parent="HBoxContainer"]
texture_filter = 1
custom_minimum_size = Vector2(600, 600)
layout_mode = 2
texture = ExtResource("1_kts70")
expand_mode = 1

[node name="RuneWhite" type="Sprite2D" parent="HBoxContainer/TextureRect3"]
modulate = Color(1, 1, 1, 0)
position = Vector2(300, 300)
scale = Vector2(37.5, 37.5)
texture = ExtResource("2_ovv2l")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_bncv8")
}

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("3_riqte")
autoplay = true
bus = &"SFX"

[node name="Button" type="Button" parent="."]
visible = false
offset_left = 1810.0
offset_top = 1623.0
offset_right = 2149.0
offset_bottom = 1766.0
theme = ExtResource("4_pc5qx")
theme_override_font_sizes/font_size = 128
theme_override_styles/normal = SubResource("StyleBoxEmpty_ee1nb")
theme_override_styles/hover = SubResource("StyleBoxEmpty_xsj0f")
theme_override_styles/pressed = SubResource("StyleBoxEmpty_8mmx7")
theme_override_styles/disabled = SubResource("StyleBoxEmpty_5xe4t")
theme_override_styles/focus = SubResource("StyleBoxEmpty_og7nn")
text = "чбошод"
flat = true

[connection signal="pressed" from="Button" to="." method="_on_button_pressed"]
