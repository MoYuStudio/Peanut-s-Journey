[gd_scene load_steps=8 format=3 uid="uid://x0vvbuypocge"]

[ext_resource type="Texture2D" uid="uid://cciym2m3cx1ij" path="res://resource/image/steam.png" id="1_86oby"]

[sub_resource type="GDScript" id="GDScript_1lnn4"]
script/source = "
extends Area2D

@onready var player = get_tree().get_first_node_in_group('player')

signal remove_from_array(object)

var level = 1
var hp = 10
var speed = 1000
var damage = 5
var attack_size = 1.0

var target = Vector2.ZERO
var angle = Vector2.ZERO

func _ready():
	angle = position.direction_to(target)
	
	var random_offset = deg_to_rad(randf() * 10 - 10)
	angle = angle.rotated(random_offset)
	
	# rotation = angle.angle() + deg_to_rad(135)
	match level:
		1:
			hp = 10
			speed = 800
			damage = 2
			attack_size = 1.0
			
"

[sub_resource type="Curve" id="Curve_gd7io"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.423868, 1), 0.0, 0.0, 0, 0, Vector2(0.769547, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_0oye8"]
curve = SubResource("Curve_gd7io")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_iaq8l"]
gravity = Vector3(10, 0, 0)
initial_velocity_min = 120.0
initial_velocity_max = 120.0
scale_min = 0.0
scale_max = 5.0
scale_curve = SubResource("CurveTexture_0oye8")
color = Color(0.270588, 1, 1, 1)

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_kr0w3"]
emission_shape = 3
emission_box_extents = Vector3(350, 10, 0)
particle_flag_disable_z = true
gravity = Vector3(0, 0, 0)
initial_velocity_min = 30.0
initial_velocity_max = 30.0
orbit_velocity_min = 0.0
orbit_velocity_max = 0.0
tangential_accel_min = 1.0
tangential_accel_max = 100.0
scale_min = 0.0
scale_max = 2.0
color = Color(0.2, 0.745098, 0.811765, 1)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_naaje"]
size = Vector2(100, 2)

[node name="RayCast2D" type="Area2D"]
script = SubResource("GDScript_1lnn4")

[node name="Line2D" type="Line2D" parent="."]
texture_filter = 1
position = Vector2(3.13351, 0)
scale = Vector2(19.0379, 7)
points = PackedVector2Array(0, 0, 100, 0)
width = 2.0
default_color = Color(0.486275, 0.741176, 0.988235, 1)

[node name="StartParticles2D" type="GPUParticles2D" parent="."]
texture_filter = 1
amount = 32
sub_emitter = NodePath(".")
process_material = SubResource("ParticleProcessMaterial_iaq8l")
texture = ExtResource("1_86oby")

[node name="LineParticles2D" type="GPUParticles2D" parent="."]
position = Vector2(350, 0)
amount = 64
process_material = SubResource("ParticleProcessMaterial_kr0w3")
texture = ExtResource("1_86oby")
lifetime = 0.3
visibility_rect = Rect2(0, -50, 700, 100)
draw_order = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(50, 0)
shape = SubResource("RectangleShape2D_naaje")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
