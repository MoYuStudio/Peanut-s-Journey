[gd_scene load_steps=35 format=3 uid="uid://b4u7q3b4vyfbd"]

[ext_resource type="FontFile" uid="uid://dwo3w3m0bti6d" path="res://resource/font/YouSheBiaoTiHei.ttf" id="2_kikh1"]
[ext_resource type="FontFile" uid="uid://cyvdvdsbhwc8m" path="res://resource/font/kenney_mini_square.ttf" id="3_nvl8e"]
[ext_resource type="Material" uid="uid://d6qhgh84hwou" path="res://resource/shader/tilt_shift.tres" id="4_djhrm"]
[ext_resource type="Texture2D" uid="uid://8r1s6ng6iids" path="res://resource/image/light.png" id="4_noqj4"]
[ext_resource type="Material" uid="uid://bss0l0sqbcfrj" path="res://resource/shader/rain.tres" id="5_ana3l"]
[ext_resource type="Texture2D" uid="uid://bnmx8pt0nk4u2" path="res://resource/logo/logo.png" id="5_oh756"]
[ext_resource type="AudioStream" uid="uid://om43vjvq3531" path="res://resource/sound/rain.mp3" id="6_5yxqh"]
[ext_resource type="AudioStream" uid="uid://dbmskiya572dy" path="res://resource/music/Always Hopeful - Silent Partner.mp3" id="6_a3elk"]
[ext_resource type="Texture2D" uid="uid://bmt8xisd5hfdx" path="res://resource/icon/icon_x64.png" id="7_suonw"]

[sub_resource type="GDScript" id="GDScript_0jq38"]
script/source = "
extends Node

@onready var camera = $Camera2D

@onready var about_page = $About

func _ready():
	pass

func _physics_process(delta):
	pass

func night_mode_switch_on():
	$Main/Background/CanvasLayer/ParallaxBackground/ParallaxLayer/CanvasModulate.visible = true
	$Main/Background/CanvasLayer/Sprite2D/PointLight2D.visible = true
	$Main/Background/CanvasLayer/Sprite2D/PointLight2D2.visible = true

func night_mode_switch_off():
	$Main/Background/CanvasLayer/ParallaxBackground/ParallaxLayer/CanvasModulate.visible = false
	$Main/Background/CanvasLayer/Sprite2D/PointLight2D.visible = false
	$Main/Background/CanvasLayer/Sprite2D/PointLight2D2.visible = false

# 连接关于页面
func _on_to_about_button_pressed():
	camera.position = Vector2(960,540+1080+1024)
	about_page.run()

# 关于页面动画结束返回
func _on_about_animation_player_animation_finished(anim_name):
	camera.position = Vector2(960,540)
"

[sub_resource type="Gradient" id="Gradient_x7f0i"]

[sub_resource type="GradientTexture2D" id="GradientTexture2D_augaf"]
gradient = SubResource("Gradient_x7f0i")

[sub_resource type="Gradient" id="Gradient_qqeh2"]

[sub_resource type="GradientTexture2D" id="GradientTexture2D_wtesc"]
gradient = SubResource("Gradient_qqeh2")

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_ajq0g"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_fx3mi"]

[sub_resource type="GDScript" id="GDScript_o3aco"]
script/source = "
extends Button

func _ready():
	pass

func _process(delta):
	if is_pressed():
		get_tree().change_scene_to_file('res://source/scene/game_main.tscn')
		# SceneTransition.change_scene('res://source/scene/game_main.tscn')
"

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_rx25s"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_qvrj6"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_rtrfq"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_eb8v3"]

[sub_resource type="GDScript" id="GDScript_fjrho"]
script/source = "
extends Button

func _ready():
	pass

func _process(delta):
	if is_pressed():
		# get_tree().change_scene_to_file('res://source/scene/menu_setting.tscn')
		SceneTransition.change_scene('res://source/scene/menu_setting.tscn')
"

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_4n3ja"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_u26vq"]

[sub_resource type="GDScript" id="GDScript_lc1lc"]
script/source = "
extends Button

func _ready():
	pass

func _process(delta):
	if is_pressed():
		get_tree().quit()
"

[sub_resource type="GDScript" id="GDScript_hh7s6"]
script/source = "
extends Sprite2D

func _ready():
	$AnimationPlayer.play('animation')
"

[sub_resource type="Animation" id="Animation_q8ih2"]
resource_name = "animation"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0.392157), Color(1, 1, 1, 1), Color(1, 1, 1, 0.392157)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_nfpkv"]
_data = {
"animation": SubResource("Animation_q8ih2")
}

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_e1yri"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_d23gl"]

[sub_resource type="GDScript" id="GDScript_jfchg"]
script/source = "
extends Button

func _ready():
	pass

func _process(delta):
	pass
	# if is_pressed():
	# 	# get_tree().change_scene_to_file('res://source/scene/menu_about.tscn')
	# 	SceneTransition.change_scene('res://source/scene/menu_about.tscn')
	
	
"

[sub_resource type="GDScript" id="GDScript_pr2eo"]
script/source = "
extends Control

func _ready():
	visible = false

func run():
	visible = true
	$AnimationPlayer.play('animation')
	await $AnimationPlayer.animation_finished
	visible = false
"

[sub_resource type="Animation" id="Animation_ogbd4"]
resource_name = "animation"
length = 12.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("VBoxContainer:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 12),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(600, 1000), Vector2(600, -3000)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_pcxl5"]
_data = {
"animation": SubResource("Animation_ogbd4")
}

[node name="MenuMain" type="Node"]
script = SubResource("GDScript_0jq38")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(960, 540)
process_callback = 0
position_smoothing_enabled = true
position_smoothing_speed = 3.0
rotation_smoothing_enabled = true
rotation_smoothing_speed = 3.0

[node name="Control" type="Control" parent="Camera2D"]
modulate = Color(1, 1, 1, 0)
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="TiltShift" type="Sprite2D" parent="Camera2D/Control"]
z_index = -1
texture_filter = 1
material = ExtResource("4_djhrm")
scale = Vector2(50, 19)
texture = SubResource("GradientTexture2D_augaf")

[node name="Rain" type="Sprite2D" parent="Camera2D/Control"]
z_index = 9
texture_filter = 1
material = ExtResource("5_ana3l")
scale = Vector2(50, 19)
texture = SubResource("GradientTexture2D_wtesc")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="Camera2D/Control/Rain"]
stream = ExtResource("6_5yxqh")
volume_db = -15.0

[node name="ColorRect" type="ColorRect" parent="Camera2D/Control/Rain"]
texture_filter = 1
offset_left = -45.6284
offset_top = -47.6291
offset_right = 2728.37
offset_bottom = 1666.37
color = Color(0, 0, 0, 0.137255)

[node name="Main" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Polygon2D" type="Polygon2D" parent="Main"]
color = Color(0.12549, 0.12549, 0.12549, 1)
polygon = PackedVector2Array(-3615, -1293, -2464, 7050, 4576, 7343, 4272, -1197)

[node name="PointLight2D" type="PointLight2D" parent="Main"]
position = Vector2(-122, -68)
scale = Vector2(1.48633, 1.39766)
color = Color(1, 0.517647, 0.25098, 1)
energy = 6.0
shadow_enabled = true
texture = ExtResource("4_noqj4")
texture_scale = 9.0

[node name="PointLight2D2" type="PointLight2D" parent="Main"]
position = Vector2(2062, 1862)
scale = Vector2(1.48633, 1.39766)
color = Color(0.458824, 0.682353, 1, 1)
energy = 6.0
shadow_enabled = true
texture = ExtResource("4_noqj4")
texture_scale = 12.0

[node name="PointLight2D3" type="PointLight2D" parent="Main"]
position = Vector2(362, 3723)
scale = Vector2(1.48633, 1.39766)
color = Color(1, 1, 0.243137, 1)
energy = 5.0
shadow_enabled = true
texture = ExtResource("4_noqj4")
texture_scale = 8.0

[node name="Title" type="Label" parent="Main"]
texture_filter = 1
layout_mode = 0
offset_left = 754.0
offset_top = 85.0
offset_right = 1106.0
offset_bottom = 259.0
theme_override_fonts/font = ExtResource("2_kikh1")
theme_override_font_sizes/font_size = 96
text = "花生迷途
"

[node name="EnTitle" type="Label" parent="Main"]
texture_filter = 1
layout_mode = 0
offset_left = 728.0
offset_top = 189.0
offset_right = 1160.0
offset_bottom = 252.0
theme_override_fonts/font = ExtResource("3_nvl8e")
theme_override_font_sizes/font_size = 48
text = "Peanut's Journey"

[node name="IconX64" type="Sprite2D" parent="Main"]
texture_filter = 1
position = Vector2(1143, 146)
rotation = -0.214676
texture = ExtResource("7_suonw")

[node name="VBoxContainer" type="VBoxContainer" parent="Main"]
layout_mode = 0
offset_left = 817.0
offset_top = 356.0
offset_right = 1061.0
offset_bottom = 736.0

[node name="FastStartButton" type="Button" parent="Main/VBoxContainer"]
texture_filter = 1
layout_mode = 2
theme_override_fonts/font = ExtResource("2_kikh1")
theme_override_font_sizes/font_size = 64
theme_override_styles/normal = SubResource("StyleBoxEmpty_ajq0g")
theme_override_styles/focus = SubResource("StyleBoxEmpty_fx3mi")
text = "快速开始"
flat = true
script = SubResource("GDScript_o3aco")

[node name="StartButton" type="Button" parent="Main/VBoxContainer"]
texture_filter = 1
layout_mode = 2
theme_override_fonts/font = ExtResource("2_kikh1")
theme_override_font_sizes/font_size = 64
theme_override_styles/normal = SubResource("StyleBoxEmpty_rx25s")
theme_override_styles/focus = SubResource("StyleBoxEmpty_qvrj6")
disabled = true
text = "开始"
flat = true

[node name="SettingButton" type="Button" parent="Main/VBoxContainer"]
texture_filter = 1
layout_mode = 2
theme_override_fonts/font = ExtResource("2_kikh1")
theme_override_font_sizes/font_size = 64
theme_override_styles/normal = SubResource("StyleBoxEmpty_rtrfq")
theme_override_styles/focus = SubResource("StyleBoxEmpty_eb8v3")
text = "设置"
flat = true
script = SubResource("GDScript_fjrho")

[node name="ESCButton" type="Button" parent="Main/VBoxContainer"]
texture_filter = 1
layout_mode = 2
theme_override_fonts/font = ExtResource("2_kikh1")
theme_override_font_sizes/font_size = 64
theme_override_styles/normal = SubResource("StyleBoxEmpty_4n3ja")
theme_override_styles/focus = SubResource("StyleBoxEmpty_u26vq")
text = "退出"
flat = true
script = SubResource("GDScript_lc1lc")

[node name="VBoxContainer2" type="VBoxContainer" parent="Main"]
layout_mode = 0
offset_left = 813.0
offset_top = 888.0
offset_right = 1076.0
offset_bottom = 972.0

[node name="Logo" type="Sprite2D" parent="Main/VBoxContainer2"]
modulate = Color(1, 1, 1, 0.392157)
position = Vector2(123, -68)
texture = ExtResource("5_oh756")
script = SubResource("GDScript_hh7s6")

[node name="AnimationPlayer" type="AnimationPlayer" parent="Main/VBoxContainer2/Logo"]
libraries = {
"": SubResource("AnimationLibrary_nfpkv")
}

[node name="Button" type="Button" parent="Main/VBoxContainer2/Logo"]
offset_left = -40.0
offset_top = -40.0
offset_right = 40.0
offset_bottom = 40.0
theme_override_styles/normal = SubResource("StyleBoxEmpty_e1yri")
theme_override_styles/focus = SubResource("StyleBoxEmpty_d23gl")
flat = true
script = SubResource("GDScript_jfchg")

[node name="Subtitle" type="Label" parent="Main/VBoxContainer2"]
self_modulate = Color(1, 1, 1, 0.588235)
texture_filter = 1
layout_mode = 2
theme_override_fonts/font = ExtResource("2_kikh1")
theme_override_font_sizes/font_size = 32
text = "MOYU STUDIO"

[node name="Web" type="Label" parent="Main/VBoxContainer2"]
self_modulate = Color(1, 1, 1, 0.588235)
texture_filter = 1
layout_mode = 2
theme_override_fonts/font = ExtResource("2_kikh1")
theme_override_font_sizes/font_size = 24
text = "www.moyu-stuido.com
"

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="Main"]
stream = ExtResource("6_a3elk")
volume_db = -20.0
autoplay = true

[node name="About" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_left = 2.0
offset_top = 2104.0
offset_right = 1922.0
offset_bottom = 3184.0
script = SubResource("GDScript_pr2eo")

[node name="VBoxContainer" type="VBoxContainer" parent="About"]
layout_mode = 0
offset_left = 600.0
offset_top = 1000.0
offset_right = 1414.0
offset_bottom = 4306.0
alignment = 1

[node name="Label" type="Label" parent="About/VBoxContainer"]
texture_filter = 1
layout_mode = 2
theme_override_fonts/font = ExtResource("2_kikh1")
theme_override_font_sizes/font_size = 64
text = "花生迷途
Peanut's Journey

MoYu Studio 摸鱼社 出品

策划
WilsonVinson

设计
WilsonVinson

程序
WilsonVinson

美术
WilsonVinson

音效
WilsonVinson

发行
WilsonVinson

鸣谢

美术
B.辞鱼

设计
气大伤肝

测试
Eric
Raoul
Rui
B.辞鱼


"
horizontal_alignment = 1

[node name="AnimationPlayer" type="AnimationPlayer" parent="About"]
libraries = {
"": SubResource("AnimationLibrary_pcxl5")
}

[connection signal="pressed" from="Main/VBoxContainer2/Logo/Button" to="." method="_on_to_about_button_pressed"]
[connection signal="animation_finished" from="About/AnimationPlayer" to="." method="_on_about_animation_player_animation_finished"]
